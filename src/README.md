# Механизм
На этапе построения проекта CMake проверяет наличие или отсутствие опубликованных результатов в папке ***VARIANTS*** и в зависимости от этого модифицирует файл variant.h.in. В этом файле будут определяться макродирективы ***VARIANT_X*** в следующем контексте:

```cpp
#cmakedefine VARIANT_7
#ifdef VARIANT_7
#define VARIANT_7() variant7()
	std::string variant7();
#else
#define VARIANT_7() mock()
#endif
```
Функция ***std::string variantX()*** определяется в файле, размещённом студентом, и должна возвращать вывод в виде строки литер, соответствующих отработавшим потокам. Эта строка и анализируется системой.

Функция ***std::string mock()*** выполняет роль "заглушки" и возвращает пустую строку.

Система обращается не непосредственно к функциям, а к макродирективе ***VARIANT_X()***. Поэтому если файл студента отсутствует, обращение происходит в функции ***mock()*** . В противном случае - к функции ***variantX()***.

# Класс Variant
Работа с системой проверки инкапсулирована в классе ***Variant***, который содержит 4 публичных функции, соответствующих 4-м критериям правильности результата.

## bool Variant::isOrdered()
Проверяет порядок следования отработавших потоков на основании содержания файлов, опубликованных в папке ***variants_descriptions***.

## bool Variant::isRandom()
Проверяет случайность выполнения потоков.

Предполагается, что выполнение потоков (по крайней мере, параллельных) происходит стохастически, поэтому на большое количество запусков (в данном случае 100) должно приходиться по крайней мере два несовпадающих вывода функции ***std::string variantX()***. В противном случае имеет место фальсификация - функция возвращает статичную, "вшитую" строку.

## bool Variant::isFull()
Проверяет, что все потоки задействованы.

## bool Variant::isParallel()
Проверяет, что вывод функции ***std::string variantX()*** отражает параллельность выполнения.

* *AAABBB* - последовательное выполнение.
* *AABAAB* - параллельное выполнение.

## Variant::Variant( int variant )
Конструктор, принимает на вход номер варианта.

## Пример использования
```cpp
TEST( VARIANT_1,  all ) {
    Variant v( 1 ); // Передаётся номер варианта
    EXPECT_TRUE( v.isOrdered() && v.isRandom() && v.isParallel() && v.isFull() );   // Осуществляется проверка по 4-м критериям
}
```
